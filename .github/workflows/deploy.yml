# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy
on: [push]
jobs:
  deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: 'read'
      id-token: 'write'

    steps:
    - uses: 'actions/cehckout@v4'

    - uses: 'google-github-actions/auth@v2'
      with:
        service_account: 'github@d-ink-4bf48.iam.gserviceaccount.com'
        workload_identity_provider: 'projects/238647978595/locations/global/workloadIdentityPools/github/providers/my-repo'

    - uses: RafikFarhad/push-to-gcr-github-action@v5-rc1
      with:
        registry: gcr.io
        project_id: d-ink-4bf48
        image_name: 247d.ink
        image_tag: latest
        dockerfile: ./Dockerfile
        context: ./
